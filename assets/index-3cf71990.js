var gt=Object.defineProperty;var $t=(t,e,n)=>e in t?gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var j=(t,e,n)=>($t(t,typeof e!="symbol"?e+"":e,n),n),Ie=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var he=(t,e,n)=>(Ie(t,e,"read from private field"),n?n.call(t):e.get(t)),me=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},_e=(t,e,n,s)=>(Ie(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function H(){}function bt(t,e){for(const n in e)t[n]=e[n];return t}function ut(t){return t()}function qe(){return Object.create(null)}function te(t){t.forEach(ut)}function ft(t){return typeof t=="function"}function U(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function yt(t){return Object.keys(t).length===0}function vt(t,...e){if(t==null)return H;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function at(t,e,n){t.$$.on_destroy.push(vt(e,n))}function Te(t,e,n,s){if(t){const l=pt(t,e,n,s);return t[0](l)}}function pt(t,e,n,s){return t[1]&&s?bt(n.ctx.slice(),t[1](s(e))):n.ctx}function Ce(t,e,n,s){if(t[2]&&s){const l=t[2](s(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const o=[],r=Math.max(e.dirty.length,l.length);for(let i=0;i<r;i+=1)o[i]=e.dirty[i]|l[i];return o}return e.dirty|l}return e.dirty}function Ae(t,e,n,s,l,o){if(l){const r=pt(e,n,s,o);t.p(r,l)}}function Ke(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function _(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function Re(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function N(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t){return document.createTextNode(t)}function A(){return X(" ")}function De(){return X("")}function D(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function wt(t){return function(e){e.target===this&&t.call(this,e)}}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function kt(t){return Array.from(t.childNodes)}function He(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ye(t,e){t.value=e??""}function J(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}let ge;function St(){if(ge===void 0){ge=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ge=!0}}return ge}function Mt(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const s=S("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const l=St();let o;return l?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=D(window,"message",r=>{r.source===s.contentWindow&&e()})):(s.src="about:blank",s.onload=()=>{o=D(s.contentWindow,"resize",e)}),_(t,s),()=>{(l||o&&s.contentWindow)&&o(),b(s)}}function ye(t,e,n){t.classList[n?"add":"remove"](e)}let je;function ue(t){je=t}const ie=[],se=[],$e=[],ze=[],zt=Promise.resolve();let Le=!1;function Lt(){Le||(Le=!0,zt.then(dt))}function ve(t){$e.push(t)}function we(t){ze.push(t)}const Se=new Set;let oe=0;function dt(){if(oe!==0)return;const t=je;do{try{for(;oe<ie.length;){const e=ie[oe];oe++,ue(e),Et(e.$$)}}catch(e){throw ie.length=0,oe=0,e}for(ue(null),ie.length=0,oe=0;se.length;)se.pop()();for(let e=0;e<$e.length;e+=1){const n=$e[e];Se.has(n)||(Se.add(n),n())}$e.length=0}while(ie.length);for(;ze.length;)ze.pop()();Le=!1,Se.clear(),ue(t)}function Et(t){if(t.fragment!==null){t.update(),te(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ve)}}const be=new Set;let ne;function Q(){ne={r:0,c:[],p:ne}}function Z(){ne.r||te(ne.c),ne=ne.p}function m(t,e){t&&t.i&&(be.delete(t),t.i(e))}function g(t,e,n,s){if(t&&t.o){if(be.has(t))return;be.add(t),ne.c.push(()=>{be.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const Tt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function ke(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function K(t){t&&t.c()}function L(t,e,n,s){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),s||ve(()=>{const r=t.$$.on_mount.map(ut).filter(ft);t.$$.on_destroy?t.$$.on_destroy.push(...r):te(r),t.$$.on_mount=[]}),o.forEach(ve)}function E(t,e){const n=t.$$;n.fragment!==null&&(te(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ct(t,e){t.$$.dirty[0]===-1&&(ie.push(t),Lt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(t,e,n,s,l,o,r,i=[-1]){const c=je;ue(t);const f=t.$$={fragment:null,ctx:[],props:o,update:H,not_equal:l,bound:qe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:qe(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};r&&r(f.root);let u=!1;if(f.ctx=n?n(t,e.props||{},(a,h,...$)=>{const w=$.length?$[0]:h;return f.ctx&&l(f.ctx[a],f.ctx[a]=w)&&(!f.skip_bound&&f.bound[a]&&f.bound[a](w),u&&Ct(t,a)),h}):[],f.update(),u=!0,te(f.before_update),f.fragment=s?s(f.ctx):!1,e.target){if(e.hydrate){const a=kt(e.target);f.fragment&&f.fragment.l(a),a.forEach(b)}else f.fragment&&f.fragment.c();e.intro&&m(t.$$.fragment),L(t,e.target,e.anchor,e.customElement),dt()}ue(c)}class x{$destroy(){E(this,1),this.$destroy=H}$on(e,n){if(!ft(n))return H;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const l=s.indexOf(n);l!==-1&&s.splice(l,1)}}$set(e){this.$$set&&!yt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const re=[];function At(t,e=H){let n;const s=new Set;function l(i){if(U(t,i)&&(t=i,n)){const c=!re.length;for(const f of s)f[1](),re.push(f,t);if(c){for(let f=0;f<re.length;f+=2)re[f][0](re[f+1]);re.length=0}}}function o(i){l(i(t))}function r(i,c=H){const f=[i,c];return s.add(f),s.size===1&&(n=e(l)||H),i(t),()=>{s.delete(f),s.size===0&&(n(),n=null)}}return{set:l,update:o,subscribe:r}}function Kt(t){return t.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())}function xe(t,e=1){return Math.round(t/e)*e}const fe=class{constructor(e,n,s,l){j(this,"key");j(this,"ctrl");j(this,"shift");j(this,"alt");arguments.length===1?this.parse(e):(this.key=e??"",this.ctrl=n??!1,this.shift=s??!1,this.alt=l??!1)}parse(e){let n=null;this.alt=!1,this.ctrl=!1,this.shift=!1;const s=e.trim().toLowerCase().split(/\s*\+\s*/);for(const l of s)switch(l){case"ctrl":this.ctrl=!0;break;case"shift":this.shift=!0;break;case"alt":this.alt=!0;break;default:n=l;break}this.key=this.shift&&n===""?"+":n}equals(e){return this.toString()==e.toString()}matches(e){const n=fe.IRREGULAR_KEYS[e.key.toLowerCase()]??e.key.toLowerCase();return this.key==n&&this.ctrl==e.ctrlKey&&this.shift==e.shiftKey&&this.alt==e.altKey}toString(){return`${this.ctrl?"Ctrl+":""}${this.shift?"Shift+":""}${this.alt?"Alt+":""}${Kt(fe.IRREGULAR_KEYS[this.key]??this.key)}`}copy(){return new fe(this.key,this.ctrl,this.shift,this.alt)}};let W=fe;j(W,"IRREGULAR_KEYS",{" ":"space",Control:"ctrl",OS:"windows",Escape:"esc",Delete:"del",ArrowUp:"⇧",ArrowRight:"⇨",ArrowDown:"⇩",ArrowLeft:"⇦"});const Oe=class{constructor(e){j(this,"description");j(this,"combo");j(this,"default_combo");j(this,"callback");this.combo=new W(e.combo??e.default_combo),this.default_combo=new W(e.default_combo),this.description=e.description,this.callback=e.callback,Oe.SHORTCUTS.set(this.toString(),this)}setCombo(e){this.combo=e}reset(){this.setCombo(this.default_combo)}try(e){return this.combo.matches(e)?(console.log(this.combo.toString()),this.callback(e),!0):!1}toString(){return this.combo.toString()}};let F=Oe;j(F,"SHORTCUTS",new Map);const Be=At();class Rt{constructor(e="move"){j(this,"state");j(this,"stateName");j(this,"states");this.states={move:new Dt,draw:new Ht},this.transition(e)}transition(e){if(this.state){if(this.state.name===e)return;this.state.onStateExit()}this.stateName=e,this.state=this.states[e],Be.set(this.state),this.state.onStateEnter()}}class ht{constructor(e){j(this,"name");j(this,"icon");j(this,"shortcuts",[]);this.name=e}noop(){}}class Dt extends ht{constructor(){super("move"),this.icon="M82.816 238.634l52.651-79.545 90.268-24.504L37.917 21.049l44.9 217.585zm107.122-109.07L58.425 50.062l31.403 152.206 36.736-55.495 63.374-17.209z"}onStateEnter(){console.log("Move state entered")}onStateExit(){console.log("Move state exited")}onMouseDown(e){console.log("Move state mouse down")}onMouseUp(e){console.log("Move state mouse up")}onMouseMove(e){console.log("Move state mouse move")}onKeyPress(e){console.log("Move state key press")}}class Ht extends ht{constructor(){super("draw"),this.icon="M188.843 238.62l50.289-50.275-36.579-36.58c2.375-7.495 3.669-15.488 3.669-23.765 0-36.409-24.86-66.987-58.524-75.719L14.222 14.222l37.163 129.65c7.353 35.584 38.855 62.35 76.615 62.35 8.562 0 16.811-1.379 24.519-3.925l36.324 36.323zM144.114 66.048L48.981 38.926l69.817 69.817a21.24 21.24 0 0 1 9.202-2.076c11.776 0 21.333 9.557 21.333 21.333s-9.557 21.333-21.333 21.333-21.333-9.557-21.333-21.333a21.24 21.24 0 0 1 2.076-9.202L39.012 49.067l26.311 91.932C71.324 170.112 97.124 192 128 192c7.396.043 13.397-.967 20.068-3.2l8.32-2.745 6.186 6.187 26.283 26.268 30.151-30.165-26.524-26.539-6.116-6.115 2.631-8.249c2.105-6.471 3.044-12.288 3.001-19.442 0-29.767-20.309-54.812-47.886-61.952z",this.shortcuts=[new F({default_combo:"Escape",description:"Cancel drawing",callback:()=>ce.transition("move")})]}onStateEnter(){console.log("Draw state entered")}onStateExit(){console.log("Draw state exited")}onMouseDown(e){console.log("Draw state mouse down")}onMouseUp(e){console.log("Draw state mouse up")}onMouseMove(e){console.log("Draw state mouse move")}onKeyPress(e){for(let n of this.shortcuts)n.try(e)}}const ce=new Rt("move");function jt(t){let e,n;const s=t[1].default,l=Te(s,t,t[0],null);return{c(){e=S("aside"),l&&l.c(),p(e,"class","svelte-1pzlsaf")},m(o,r){y(o,e,r),l&&l.m(e,null),n=!0},p(o,[r]){l&&l.p&&(!n||r&1)&&Ae(l,s,o,o[0],n?Ce(s,o[0],r,null):Ke(o[0]),null)},i(o){n||(m(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&b(e),l&&l.d(o)}}}function Bt(t,e,n){let{$$slots:s={},$$scope:l}=e;return t.$$set=o=>{"$$scope"in o&&n(0,l=o.$$scope)},[l,s]}class Ge extends x{constructor(e){super(),Y(this,e,Bt,jt,U,{})}}function Ut(t){let e,n,s,l,o,r,i;const c=t[3].default,f=Te(c,t,t[2],null);return{c(){e=S("span"),n=S("input"),s=A(),l=S("label"),f&&f.c(),p(n,"type","checkbox"),p(n,"id",t[1]),p(l,"for",t[1]),p(e,"class","svelte-1nj6d01")},m(u,a){y(u,e,a),_(e,n),n.checked=t[0],_(e,s),_(e,l),f&&f.m(l,null),o=!0,r||(i=D(n,"change",t[4]),r=!0)},p(u,[a]){a&1&&(n.checked=u[0]),f&&f.p&&(!o||a&4)&&Ae(f,c,u,u[2],o?Ce(c,u[2],a,null):Ke(u[2]),null)},i(u){o||(m(f,u),o=!0)},o(u){g(f,u),o=!1},d(u){u&&b(e),f&&f.d(u),r=!1,i()}}}function Ot(t,e,n){let{$$slots:s={},$$scope:l}=e,{checked:o=!1}=e;const r=Math.random().toString(36).slice(2);function i(){o=this.checked,n(0,o)}return t.$$set=c=>{"checked"in c&&n(0,o=c.checked),"$$scope"in c&&n(2,l=c.$$scope)},[o,r,l,s,i]}class mt extends x{constructor(e){super(),Y(this,e,Ot,Ut,U,{checked:0})}}var ae,pe,de;const Ne=class{constructor(e,n,s=!1){me(this,ae,void 0);me(this,pe,void 0);me(this,de,void 0);j(this,"selected");_e(this,ae,e),_e(this,pe,n),_e(this,de,s),this.selected=!1}get x(){return he(this,ae)}get y(){return he(this,pe)}get control(){return he(this,de)}relativeTo(e){return new Ne(this.x-e.x,this.y-e.y)}compact(){return`${this.x}${this.y<0?"":" "}${this.y}`}toString(){return`${this.x},${this.y}`}};let Ee=Ne;ae=new WeakMap,pe=new WeakMap,de=new WeakMap;function Nt(t){let e,n,s,l,o,r,i,c,f,u;return{c(){e=S("button"),n=N("svg"),s=N("mask"),l=N("rect"),o=N("path"),r=N("g"),i=N("path"),c=N("path"),p(l,"x","0"),p(l,"y","0"),p(l,"width","100%"),p(l,"height","100%"),p(l,"fill","#fff"),p(o,"fill","#000"),p(o,"id","cutout-path"),p(o,"d","M0 -11l70 51c7 5 7 15 0 20l-70 51z"),p(s,"id","cutout"),p(i,"class","cog svelte-up99lr"),p(i,"fill-rule","evenodd"),p(i,"d","M53.706 0h-7.41l-2.085 5.537-5.878 1.17-4.044-4.32-6.845 2.835.192 5.914-4.983 3.33-5.39-2.443-5.24 5.24 2.44 5.4-3.33 4.983-5.913-.195L2.4 34.287l4.318 4.046-1.17 5.878-5.538 2.083v7.41l5.537 2.085 1.17 5.878L2.4 65.713l2.835 6.845 5.913-.195 3.33 4.983-2.44 5.4 5.24 5.24 5.39-2.443 4.983 3.33-.192 5.914 6.845 2.835 4.044-4.32 5.878 1.17L46.297 100h7.41l2.083-5.538 5.878-1.17 4.046 4.318 6.845-2.835-.195-5.913 4.983-3.33 5.4 2.44 5.24-5.24-2.443-5.39 3.33-4.983 5.914.192 2.835-6.845-4.32-4.044 1.17-5.878L100 53.703v-7.41l-5.538-2.083-1.17-5.878 4.32-4.044-2.835-6.845-5.914.192-3.33-4.983 2.443-5.39-5.24-5.24-5.4 2.44-4.983-3.33.195-5.913-6.845-2.835-4.046 4.318-5.878-1.17L53.706 0zM50 83.213c18.343 0 33.214-14.87 33.214-33.213S68.344 16.787 50 16.787 16.787 31.657 16.787 50 31.657 83.213 50 83.213z"),p(r,"mask","url(#cutout)"),p(c,"class","m svelte-up99lr"),p(c,"d","M7.5 24v52h7v-39l13 39l13 -39v39h7v-52h-10l-10 32l-10 -32z"),p(n,"xmlns","http://www.w3.org/2000/svg"),p(n,"viewBox","0 0 100 100"),p(n,"class","svelte-up99lr"),p(e,"class","svelte-up99lr")},m(a,h){y(a,e,h),_(e,n),_(n,s),_(s,l),_(s,o),_(n,r),_(r,i),_(n,c),f||(u=D(i,"animationend",t[0]),f=!0)},p:H,i:H,o:H,d(a){a&&b(e),f=!1,u()}}}function Pt(t){return[()=>console.log("animation ended")]}class It extends x{constructor(e){super(),Y(this,e,Pt,Nt,U,{})}}function qt(t){let e,n,s,l,o,r;return{c(){e=S("button"),n=N("svg"),s=N("path"),p(s,"fill-rule","evenodd"),p(s,"d",l=t[0].icon),p(s,"class","svelte-vab1rb"),p(n,"xmlns","http://www.w3.org/2000/svg"),p(n,"viewBox","0 0 256 256"),p(n,"height","24"),p(n,"fill","none"),p(e,"class","toolbar-button svelte-vab1rb"),ye(e,"active",t[1])},m(i,c){y(i,e,c),_(e,n),_(n,s),o||(r=D(e,"mousedown",t[2]),o=!0)},p(i,[c]){c&1&&l!==(l=i[0].icon)&&p(s,"d",l),c&2&&ye(e,"active",i[1])},i:H,o:H,d(i){i&&b(e),o=!1,r()}}}function Yt(t,e,n){let s,l;at(t,Be,i=>n(3,l=i));let{thisState:o}=e;function r(){ce.transition(o.name)}return t.$$set=i=>{"thisState"in i&&n(0,o=i.thisState)},t.$$.update=()=>{t.$$.dirty&9&&n(1,s=o.name===l.name)},[o,s,r,l]}class xt extends x{constructor(e){super(),Y(this,e,Yt,qt,U,{thisState:0})}}function Ve(t,e,n){const s=t.slice();return s[0]=e[n],s}function We(t){let e,n;return e=new xt({props:{thisState:t[0]}}),{c(){K(e.$$.fragment)},m(s,l){L(e,s,l),n=!0},p:H,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function Gt(t){let e,n,s,l;n=new It({});let o=Object.values(ce.states),r=[];for(let c=0;c<o.length;c+=1)r[c]=We(Ve(t,o,c));const i=c=>g(r[c],1,1,()=>{r[c]=null});return{c(){e=S("div"),K(n.$$.fragment),s=A();for(let c=0;c<r.length;c+=1)r[c].c();p(e,"class","toolbar svelte-1ldks7c")},m(c,f){y(c,e,f),L(n,e,null),_(e,s);for(let u=0;u<r.length;u+=1)r[u].m(e,null);l=!0},p(c,[f]){if(f&0){o=Object.values(ce.states);let u;for(u=0;u<o.length;u+=1){const a=Ve(c,o,u);r[u]?(r[u].p(a,f),m(r[u],1)):(r[u]=We(a),r[u].c(),m(r[u],1),r[u].m(e,null))}for(Q(),u=o.length;u<r.length;u+=1)i(u);Z()}},i(c){if(!l){m(n.$$.fragment,c);for(let f=0;f<o.length;f+=1)m(r[f]);l=!0}},o(c){g(n.$$.fragment,c),r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)g(r[f]);l=!1},d(c){c&&b(e),E(n),Re(r,c)}}}class Vt extends x{constructor(e){super(),Y(this,e,null,Gt,U,{})}}function Fe(t){let e,n;return{c(){e=S("h2"),n=X(t[1]),p(e,"class","title svelte-jwoh95")},m(s,l){y(s,e,l),_(e,n)},p(s,l){l&2&&He(n,s[1])},d(s){s&&b(e)}}}function Wt(t){let e,n,s,l,o,r,i,c,f,u=t[1]&&Fe(t);const a=t[4].default,h=Te(a,t,t[3],null);return{c(){e=S("dialog"),n=N("svg"),s=N("path"),l=A(),o=S("div"),u&&u.c(),r=A(),h&&h.c(),p(s,"d","M.35 .35L3.65 3.65M3.65 .35L.35 3.65"),p(n,"class","close svelte-jwoh95"),p(n,"viewBox","0 0 4 4"),p(n,"xmlns","http://www.w3.org/2000/svg"),p(o,"class","content svelte-jwoh95"),p(e,"class","modal svelte-jwoh95"),p(e,"data-block-shortcuts","true")},m($,w){y($,e,w),_(e,n),_(n,s),_(e,l),_(e,o),u&&u.m(o,null),_(o,r),h&&h.m(o,null),t[7](e),i=!0,c||(f=[D(n,"click",t[5]),D(e,"close",t[6]),D(e,"click",wt(t[8]))],c=!0)},p($,[w]){$[1]?u?u.p($,w):(u=Fe($),u.c(),u.m(o,r)):u&&(u.d(1),u=null),h&&h.p&&(!i||w&8)&&Ae(h,a,$,$[3],i?Ce(a,$[3],w,null):Ke($[3]),null)},i($){i||(m(h,$),i=!0)},o($){g(h,$),i=!1},d($){$&&b(e),u&&u.d(),h&&h.d($),t[7](null),c=!1,te(f)}}}function Ft(t,e,n){let{$$slots:s={},$$scope:l}=e,{open:o=!1}=e,{title:r=""}=e,i;const c=()=>n(0,o=!1),f=()=>n(0,o=!1);function u(h){se[h?"unshift":"push"](()=>{i=h,n(2,i)})}const a=()=>n(0,o=!1);return t.$$set=h=>{"open"in h&&n(0,o=h.open),"title"in h&&n(1,r=h.title),"$$scope"in h&&n(3,l=h.$$scope)},t.$$.update=()=>{t.$$.dirty&5&&(o?i==null||i.showModal():i==null||i.close())},[o,r,i,l,s,c,f,u,a]}class Ue extends x{constructor(e){super(),Y(this,e,Ft,Wt,U,{open:0,title:1})}}function Xt(t){let e,n;return{c(){e=S("span"),n=X(t[0]),p(e,"class","key svelte-171zywq")},m(s,l){y(s,e,l),_(e,n)},p(s,[l]){l&1&&He(n,s[0])},i:H,o:H,d(s){s&&b(e)}}}function Jt(t,e,n){let{key:s}=e;return t.$$set=l=>{"key"in l&&n(0,s=l.key)},[s]}class ee extends x{constructor(e){super(),Y(this,e,Jt,Xt,U,{key:0})}}function Xe(t){let e,n;return e=new ee({props:{key:"Ctrl"}}),{c(){K(e.$$.fragment)},m(s,l){L(e,s,l),n=!0},i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function Je(t){let e,n;return e=new ee({props:{key:"Alt"}}),{c(){K(e.$$.fragment)},m(s,l){L(e,s,l),n=!0},i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function Qe(t){let e,n;return e=new ee({props:{key:"Shift"}}),{c(){K(e.$$.fragment)},m(s,l){L(e,s,l),n=!0},i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function Ze(t){let e,n;return e=new ee({props:{key:W.IRREGULAR_KEYS[t[0].key]??t[0].key}}),{c(){K(e.$$.fragment)},m(s,l){L(e,s,l),n=!0},p(s,l){const o={};l&1&&(o.key=W.IRREGULAR_KEYS[s[0].key]??s[0].key),e.$set(o)},i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function Qt(t){let e,n,s,l,o,r=t[0].ctrl&&Xe(),i=t[0].alt&&Je(),c=t[0].shift&&Qe(),f=t[0].key&&Ze(t);return{c(){e=S("div"),r&&r.c(),n=A(),i&&i.c(),s=A(),c&&c.c(),l=A(),f&&f.c(),p(e,"class","shortcut svelte-1hyh641")},m(u,a){y(u,e,a),r&&r.m(e,null),_(e,n),i&&i.m(e,null),_(e,s),c&&c.m(e,null),_(e,l),f&&f.m(e,null),o=!0},p(u,[a]){u[0].ctrl?r?a&1&&m(r,1):(r=Xe(),r.c(),m(r,1),r.m(e,n)):r&&(Q(),g(r,1,1,()=>{r=null}),Z()),u[0].alt?i?a&1&&m(i,1):(i=Je(),i.c(),m(i,1),i.m(e,s)):i&&(Q(),g(i,1,1,()=>{i=null}),Z()),u[0].shift?c?a&1&&m(c,1):(c=Qe(),c.c(),m(c,1),c.m(e,l)):c&&(Q(),g(c,1,1,()=>{c=null}),Z()),u[0].key?f?(f.p(u,a),a&1&&m(f,1)):(f=Ze(u),f.c(),m(f,1),f.m(e,null)):f&&(Q(),g(f,1,1,()=>{f=null}),Z())},i(u){o||(m(r),m(i),m(c),m(f),o=!0)},o(u){g(r),g(i),g(c),g(f),o=!1},d(u){u&&b(e),r&&r.d(),i&&i.d(),c&&c.d(),f&&f.d()}}}function Zt(t,e,n){let{combo:s}=e;return t.$$set=l=>{"combo"in l&&n(0,s=l.combo)},[s]}class _t extends x{constructor(e){super(),Y(this,e,Zt,Qt,U,{combo:0})}}function en(t){let e,n,s,l,o;return n=new ee({props:{key:"Enter"}}),l=new ee({props:{key:"Esc"}}),{c(){e=X("Shortcut contains "),K(n.$$.fragment),s=X(" and / or "),K(l.$$.fragment)},m(r,i){y(r,e,i),L(n,r,i),y(r,s,i),L(l,r,i),o=!0},p:H,i(r){o||(m(n.$$.fragment,r),m(l.$$.fragment,r),o=!0)},o(r){g(n.$$.fragment,r),g(l.$$.fragment,r),o=!1},d(r){r&&b(e),E(n,r),r&&b(s),E(l,r)}}}function tn(t){let e,n,s,l,o,r,i,c,f,u,a,h,$,w,P,B,G;return l=new ee({props:{key:"Enter"}}),i=new mt({props:{$$slots:{default:[en]},$$scope:{ctx:t}}}),w=new _t({props:{combo:t[0]}}),{c(){e=S("div"),n=S("div"),s=X("Press the desired key combination, then press "),K(l.$$.fragment),o=A(),r=S("div"),K(i.$$.fragment),c=A(),f=S("form"),u=S("input"),h=A(),$=S("div"),K(w.$$.fragment),p(r,"class","freeze svelte-1i9i5s"),p(u,"type","text"),u.value=a=t[0].toString(),u.autofocus=!0,p(u,"class","svelte-1i9i5s"),p(f,"method","dialog"),p($,"class","display svelte-1i9i5s"),p(e,"class","set-shortcut svelte-1i9i5s")},m(z,T){y(z,e,T),_(e,n),_(n,s),L(l,n,null),_(e,o),_(e,r),L(i,r,null),_(e,c),_(e,f),_(f,u),_(e,h),_(e,$),L(w,$,null),P=!0,u.focus(),B||(G=[D(u,"keydown",t[1]),D(f,"submit",t[2])],B=!0)},p(z,[T]){const R={};T&16&&(R.$$scope={dirty:T,ctx:z}),i.$set(R),(!P||T&1&&a!==(a=z[0].toString())&&u.value!==a)&&(u.value=a);const M={};T&1&&(M.combo=z[0]),w.$set(M)},i(z){P||(m(l.$$.fragment,z),m(i.$$.fragment,z),m(w.$$.fragment,z),P=!0)},o(z){g(l.$$.fragment,z),g(i.$$.fragment,z),g(w.$$.fragment,z),P=!1},d(z){z&&b(e),E(l),E(i),E(w),B=!1,te(G)}}}const nn=new Set([..."`1234567890-=~!@#$%^&*()_+qwertyuiop[]\\{}|asdfghjkl;':\"zxcvbnm,./<>? ","arrowup","arrowright","arrowdown","arrowleft","backspace","delete","end","home","pageup","pagedown"]);function sn(t,e,n){let{shortcut:s}=e,l=new W;function o(i){if(i.key!=="Enter"&&i.key!=="Escape")i.preventDefault();else return;n(0,l=new W(nn.has(i.key.toLowerCase())?i.key:"",i.ctrlKey,i.shiftKey,i.altKey))}function r(i){s.setCombo(l),n(0,l=new W)}return t.$$set=i=>{"shortcut"in i&&n(3,s=i.shortcut)},[l,o,r,s]}class ln extends x{constructor(e){super(),Y(this,e,sn,tn,U,{shortcut:3})}}function et(t){let e,n,s;return n=new _t({props:{combo:t[0].combo}}),{c(){e=S("span"),K(n.$$.fragment),p(e,"class","keys svelte-1v3xkrn")},m(l,o){y(l,e,o),L(n,e,null),s=!0},p(l,o){const r={};o&1&&(r.combo=l[0].combo),n.$set(r)},i(l){s||(m(n.$$.fragment,l),s=!0)},o(l){g(n.$$.fragment,l),s=!1},d(l){l&&b(e),E(n)}}}function tt(t){let e,n,s;return{c(){e=S("button"),e.innerHTML='<svg class="reset svelte-1v3xkrn" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M5 12A12 12 0 1 1 5 20M5 12l0-4l3.3 2.2z"></path></svg>'},m(l,o){y(l,e,o),n||(s=D(e,"click",t[2]),n=!0)},p:H,d(l){l&&b(e),n=!1,s()}}}function nt(t){let e=!t[0].default_combo.equals(t[0].combo),n,s=e&&tt(t);return{c(){s&&s.c(),n=De()},m(l,o){s&&s.m(l,o),y(l,n,o)},p(l,o){o&1&&(e=!l[0].default_combo.equals(l[0].combo)),e?s?s.p(l,o):(s=tt(l),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(l){s&&s.d(l),l&&b(n)}}}function on(t){let e,n;return e=new ln({props:{shortcut:t[0]}}),{c(){K(e.$$.fragment)},m(s,l){L(e,s,l),n=!0},p(s,l){const o={};l&1&&(o.shortcut=s[0]),e.$set(o)},i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function rn(t){let e,n,s=t[0].description+"",l,o,r=t[1],i,c,f=t[1],u,a,h,$,w,P,B,G,z,T=et(t),R=nt(t);function M(v){t[4](v)}let O={$$slots:{default:[on]},$$scope:{ctx:t}};return t[1]!==void 0&&(O.open=t[1]),$=new Ue({props:O}),se.push(()=>ke($,"open",M)),{c(){e=S("div"),n=S("span"),l=X(s),o=A(),T.c(),i=A(),c=S("span"),R.c(),u=A(),a=S("button"),a.innerHTML='<svg class="edit svelte-1v3xkrn" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M188.873 16l4.226.377c11.952 1.065 23.058 7.183 31.312 15.438s14.373 19.361 15.439 31.313l.376 4.225-147.55 147.55-82.949 31.596 31.596-82.949L188.873 16zm6.545 19.131L61.954 168.596l25.676 25.676L221.095 60.808c-1.418-5.678-4.759-11.392-9.522-16.155s-10.477-8.103-16.155-9.522zM71.298 203.617l-18.69-18.689-11.499 30.188 30.189-11.499z"></path></svg>',h=A(),w=S("div"),K($.$$.fragment),p(c,"class","options svelte-1v3xkrn"),p(e,"class","shortcut svelte-1v3xkrn"),J(w,"display","contents"),J(w,"--modal-width","40vw")},m(v,k){y(v,e,k),_(e,n),_(n,l),_(e,o),T.m(e,null),_(e,i),_(e,c),R.m(c,null),_(c,u),_(c,a),y(v,h,k),y(v,w,k),L($,w,null),B=!0,G||(z=D(a,"click",t[3]),G=!0)},p(v,[k]){(!B||k&1)&&s!==(s=v[0].description+"")&&He(l,s),k&2&&U(r,r=v[1])?(Q(),g(T,1,1,H),Z(),T=et(v),T.c(),m(T,1),T.m(e,i)):T.p(v,k),k&2&&U(f,f=v[1])?(R.d(1),R=nt(v),R.c(),R.m(c,u)):R.p(v,k);const q={};k&33&&(q.$$scope={dirty:k,ctx:v}),!P&&k&2&&(P=!0,q.open=v[1],we(()=>P=!1)),$.$set(q)},i(v){B||(m(T),m($.$$.fragment,v),B=!0)},o(v){g(T),g($.$$.fragment,v),B=!1},d(v){v&&b(e),T.d(v),R.d(v),v&&b(h),v&&$&&b(w),E($,v),G=!1,z()}}}function cn(t,e,n){let{shortcut:s}=e,l=!1;function o(){s.reset(),n(0,s)}function r(){n(1,l=!0)}function i(c){l=c,n(1,l)}return t.$$set=c=>{"shortcut"in c&&n(0,s=c.shortcut)},[s,l,o,r,i]}class un extends x{constructor(e){super(),Y(this,e,cn,rn,U,{shortcut:0})}}function st(t,e,n){const s=t.slice();return s[3]=e[n],s}function lt(t){let e,n;return e=new un({props:{shortcut:t[3]}}),{c(){K(e.$$.fragment)},m(s,l){L(e,s,l),n=!0},p:H,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function fn(t){let e,n,s=[...F.SHORTCUTS.values()],l=[];for(let r=0;r<s.length;r+=1)l[r]=lt(st(t,s,r));const o=r=>g(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=De()},m(r,i){for(let c=0;c<l.length;c+=1)l[c].m(r,i);y(r,e,i),n=!0},p(r,i){if(i&0){s=[...F.SHORTCUTS.values()];let c;for(c=0;c<s.length;c+=1){const f=st(r,s,c);l[c]?(l[c].p(f,i),m(l[c],1)):(l[c]=lt(f),l[c].c(),m(l[c],1),l[c].m(e.parentNode,e))}for(Q(),c=s.length;c<l.length;c+=1)o(c);Z()}},i(r){if(!n){for(let i=0;i<s.length;i+=1)m(l[i]);n=!0}},o(r){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)g(l[i]);n=!1},d(r){Re(l,r),r&&b(e)}}}function an(t){let e,n,s,l,o,r,i;function c(u){t[1](u)}let f={title:"Keyboard Shortcuts",$$slots:{default:[fn]},$$scope:{ctx:t}};return t[0]!==void 0&&(f.open=t[0]),e=new Ue({props:f}),se.push(()=>ke(e,"open",c)),{c(){K(e.$$.fragment),s=A(),l=S("button"),l.innerHTML='<svg viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg" class="svelte-hyimv1"><path d="M1 5h3v3h-3zm4 0h3v3h-3zm4 0h3v3h-3zm4 0h3v3h-3zm4 0h3v3h-3z"></path><path d="M1 9h5v3h-5zm6 0h3v3h-3zm4 0h3v3h-3zm4 0h5v3h-5z"></path><path d="M4 13h13v3h-13z"></path></svg>',p(l,"class","svelte-hyimv1")},m(u,a){L(e,u,a),y(u,s,a),y(u,l,a),o=!0,r||(i=D(l,"click",t[2]),r=!0)},p(u,[a]){const h={};a&64&&(h.$$scope={dirty:a,ctx:u}),!n&&a&1&&(n=!0,h.open=u[0],we(()=>n=!1)),e.$set(h)},i(u){o||(m(e.$$.fragment,u),o=!0)},o(u){g(e.$$.fragment,u),o=!1},d(u){E(e,u),u&&b(s),u&&b(l),r=!1,i()}}}function pn(t,e,n){let s=!1;function l(r){s=r,n(0,s)}return[s,l,()=>n(0,s=!0)]}class dn extends x{constructor(e){super(),Y(this,e,pn,an,U,{})}}function ot(t){let e,n;return e=new ee({props:{key:t[1]}}),{c(){K(e.$$.fragment)},m(s,l){L(e,s,l),n=!0},p(s,l){const o={};l&2&&(o.key=s[1]),e.$set(o)},i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function hn(t){let e,n,s,l,o,r,i=t[1]!=""&&ot(t);return{c(){e=S("input"),n=A(),s=S("div"),i&&i.c(),p(e,"type","text"),p(e,"class","svelte-1f9keg0"),p(s,"class","keys svelte-1f9keg0")},m(c,f){y(c,e,f),y(c,n,f),y(c,s,f),i&&i.m(s,null),l=!0,o||(r=D(e,"keydown",t[2]),o=!0)},p(c,f){c[1]!=""?i?(i.p(c,f),f&2&&m(i,1)):(i=ot(c),i.c(),m(i,1),i.m(s,null)):i&&(Q(),g(i,1,1,()=>{i=null}),Z())},i(c){l||(m(i),l=!0)},o(c){g(i),l=!1},d(c){c&&b(e),c&&b(n),c&&b(s),i&&i.d(),o=!1,r()}}}function mn(t){let e,n,s,l,o,r,i;function c(u){t[3](u)}let f={title:"key testing",$$slots:{default:[hn]},$$scope:{ctx:t}};return t[0]!==void 0&&(f.open=t[0]),e=new Ue({props:f}),se.push(()=>ke(e,"open",c)),{c(){K(e.$$.fragment),s=A(),l=S("button"),l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" fill="none"><g fill="#5dd3e3"><ellipse cx="120.812" cy="54.745" rx="9.836" ry="9.846"></ellipse><ellipse cx="110.583" cy="172.111" rx="9.836" ry="9.846"></ellipse><ellipse cx="144.811" cy="35.446" rx="7.082" ry="7.089"></ellipse><ellipse cx="152.68" cy="185.895" rx="7.082" ry="7.089"></ellipse><ellipse cx="123.566" cy="89.797" rx="7.082" ry="7.089"></ellipse><ellipse cx="130.647" cy="136.271" rx="7.082" ry="7.089"></ellipse><ellipse cx="125.533" cy="5.12" rx="5.115" ry="5.12"></ellipse><ellipse cx="135.762" cy="167.385" rx="5.115" ry="5.12"></ellipse><ellipse cx="120.025" cy="197.317" rx="5.115" ry="5.12"></ellipse><ellipse cx="116.091" cy="152.418" rx="3.541" ry="3.545"></ellipse><ellipse cx="120.812" cy="119.335" rx="3.541" ry="3.545"></ellipse><ellipse cx="87.764" cy="194.166" rx="3.541" ry="3.545"></ellipse><ellipse cx="132.615" cy="109.095" rx="5.115" ry="5.12"></ellipse><path d="M183.611 213.12l-13.227-13.834c-13.377 8.271-20.065 4.726-32.655 6.696s-17.189 4.332-27.54 4.332l-33.048-1.364-12.043 15.151c-3.409 6.877 1.562 15.116 9.379 15.116h106.048c8.045 0 13.076-8.729 9.057-15.717l-5.97-10.38z"></path></g><path fill-rule="evenodd" d="M155.04 72.468v56.48l52.769 91.618c9.074 15.754-2.284 35.434-20.45 35.434H67.641c-18.166 0-29.524-19.68-20.45-35.434l52.769-91.618v-56.48H88.157V60.652h78.686v11.815H155.04zm-97.624 154l54.347-94.358V72.468h31.474v59.642l54.347 94.358c4.537 7.876-1.142 17.717-10.225 17.717H67.641c-9.083 0-14.762-9.841-10.225-17.717z" fill="#fff"></path></svg>',p(l,"class","svelte-1f9keg0")},m(u,a){L(e,u,a),y(u,s,a),y(u,l,a),o=!0,r||(i=D(l,"click",t[4]),r=!0)},p(u,[a]){const h={};a&34&&(h.$$scope={dirty:a,ctx:u}),!n&&a&1&&(n=!0,h.open=u[0],we(()=>n=!1)),e.$set(h)},i(u){o||(m(e.$$.fragment,u),o=!0)},o(u){g(e.$$.fragment,u),o=!1},d(u){E(e,u),u&&b(s),u&&b(l),r=!1,i()}}}function _n(t,e,n){let s=!1,l="";function o(c){c.preventDefault(),n(1,l=c.key)}function r(c){s=c,n(0,s)}const i=()=>n(0,s=!0);return t.$$.update=()=>{t.$$.dirty&1&&(s||n(1,l=""))},[s,l,o,r,i]}class gn extends x{constructor(e){super(),Y(this,e,_n,mn,U,{})}}const{document:$n}=Tt;function rt(t,e,n){const s=t.slice();return s[18]=e[n],s[20]=n,s}function Me(t){const e=t.slice(),n=e[6].at(-1);return e[21]=n,e}function it(t){let e,n;return{c(){e=N("path"),p(e,"d",n="M"+t[21].x+" "+t[21].y+"H"+t[4]+"V"+t[5]+"H"+t[21].x+"z"),p(e,"class","selection svelte-112jbh8"),p(e,"fill","#0D99FF20"),p(e,"stroke-width","1")},m(s,l){y(s,e,l)},p(s,l){l&112&&n!==(n="M"+s[21].x+" "+s[21].y+"H"+s[4]+"V"+s[5]+"H"+s[21].x+"z")&&p(e,"d",n)},d(s){s&&b(e)}}}function ct(t){let e,n,s,l;return{c(){e=N("circle"),p(e,"cx",n=t[18].x),p(e,"cy",s=t[18].y),p(e,"r",l=t[20]===t[6].length-1?5:3.5),p(e,"class","point svelte-112jbh8"),ye(e,"last",t[20]===t[6].length-1)},m(o,r){y(o,e,r)},p(o,r){r&64&&n!==(n=o[18].x)&&p(e,"cx",n),r&64&&s!==(s=o[18].y)&&p(e,"cy",s),r&64&&l!==(l=o[20]===o[6].length-1?5:3.5)&&p(e,"r",l),r&64&&ye(e,"last",o[20]===o[6].length-1)},d(o){o&&b(e)}}}function bn(t){let e;return{c(){e=X("Snap to grid")},m(n,s){y(n,e,s)},d(n){n&&b(e)}}}function yn(t){let e,n,s,l,o,r,i;function c(u){t[14](u)}let f={$$slots:{default:[bn]},$$scope:{ctx:t}};return t[3]!==void 0&&(f.checked=t[3]),e=new mt({props:f}),se.push(()=>ke(e,"checked",c)),{c(){K(e.$$.fragment),s=A(),l=S("input"),p(l,"type","text"),p(l,"inputmode","numeric")},m(u,a){L(e,u,a),y(u,s,a),y(u,l,a),Ye(l,t[0]),o=!0,r||(i=D(l,"input",t[15]),r=!0)},p(u,a){const h={};a&4194304&&(h.$$scope={dirty:a,ctx:u}),!n&&a&8&&(n=!0,h.checked=u[3],we(()=>n=!1)),e.$set(h),a&1&&l.value!==u[0]&&Ye(l,u[0])},i(u){o||(m(e.$$.fragment,u),o=!0)},o(u){g(e.$$.fragment,u),o=!1},d(u){E(e,u),u&&b(s),u&&b(l),r=!1,i()}}}function vn(t){let e,n,s,l,o,r,i,c,f,u,a,h,$=`url('cursor/svg/${t[8].name}.svg')`,w=`url('cursor/png/${t[8].name}.png')`,P,B=`${t[0]}px`,G,z,T,R,M,O,v;n=new gn({}),l=new Vt({}),r=new Ge({});let k=t[7]&&it(Me(t)),q=t[6],I=[];for(let d=0;d<q.length;d+=1)I[d]=ct(rt(t,q,d));return z=new Ge({props:{$$slots:{default:[yn]},$$scope:{ctx:t}}}),R=new dn({}),{c(){e=A(),K(n.$$.fragment),s=A(),K(l.$$.fragment),o=A(),K(r.$$.fragment),i=A(),c=S("main"),f=N("svg"),k&&k.c(),u=De();for(let d=0;d<I.length;d+=1)I[d].c();a=N("circle"),G=A(),K(z.$$.fragment),T=A(),K(R.$$.fragment),p(a,"cx",t[4]),p(a,"cy",t[5]),p(a,"r","3.5"),p(a,"class","point svelte-112jbh8"),p(f,"xmlns","http://www.w3.org/2000/svg"),p(f,"viewBox",h="0 0 "+t[2]+" "+t[1]),p(f,"fill","none"),p(f,"class","svelte-112jbh8"),J(f,"--cursor-0",$),J(f,"--cursor-1",w),p(c,"class","svelte-112jbh8"),ve(()=>t[13].call(c)),J(c,"--grid-size",B)},m(d,C){y(d,e,C),L(n,d,C),y(d,s,C),L(l,d,C),y(d,o,C),L(r,d,C),y(d,i,C),y(d,c,C),_(c,f),k&&k.m(f,null),_(f,u);for(let le=0;le<I.length;le+=1)I[le].m(f,null);_(f,a),P=Mt(c,t[13].bind(c)),y(d,G,C),L(z,d,C),y(d,T,C),L(R,d,C),M=!0,O||(v=[D($n.body,"keydown",t[12]),D(f,"mousedown",t[10]),D(f,"mouseup",t[11]),D(c,"mousemove",t[9])],O=!0)},p(d,[C]){if(d[7]?k?k.p(Me(d),C):(k=it(Me(d)),k.c(),k.m(f,u)):k&&(k.d(1),k=null),C&64){q=d[6];let V;for(V=0;V<q.length;V+=1){const Pe=rt(d,q,V);I[V]?I[V].p(Pe,C):(I[V]=ct(Pe),I[V].c(),I[V].m(f,a))}for(;V<I.length;V+=1)I[V].d(1);I.length=q.length}(!M||C&16)&&p(a,"cx",d[4]),(!M||C&32)&&p(a,"cy",d[5]),(!M||C&6&&h!==(h="0 0 "+d[2]+" "+d[1]))&&p(f,"viewBox",h),C&256&&$!==($=`url('cursor/svg/${d[8].name}.svg')`)&&J(f,"--cursor-0",$),C&256&&w!==(w=`url('cursor/png/${d[8].name}.png')`)&&J(f,"--cursor-1",w),C&1&&B!==(B=`${d[0]}px`)&&J(c,"--grid-size",B);const le={};C&4194313&&(le.$$scope={dirty:C,ctx:d}),z.$set(le)},i(d){M||(m(n.$$.fragment,d),m(l.$$.fragment,d),m(r.$$.fragment,d),m(z.$$.fragment,d),m(R.$$.fragment,d),M=!0)},o(d){g(n.$$.fragment,d),g(l.$$.fragment,d),g(r.$$.fragment,d),g(z.$$.fragment,d),g(R.$$.fragment,d),M=!1},d(d){d&&b(e),E(n,d),d&&b(s),E(l,d),d&&b(o),E(r,d),d&&b(i),d&&b(c),k&&k.d(),Re(I,d),P(),d&&b(G),E(z,d),d&&b(T),E(R,d),O=!1,te(v)}}}function wn(t,e,n){let s,l;at(t,Be,M=>n(8,l=M));let o=0,r=0,i=!0,c=50,f=0,u=0,a=[];const h=[new F({default_combo:"v",combo:"shift + alt + y",description:"Move mode",callback:()=>ce.transition("move")}),new F({default_combo:"p",description:"Draw mode",callback:()=>ce.transition("draw")}),new F({default_combo:"ctrl+z",description:"Undo",callback:()=>{a.pop(),n(6,a)}})];function $(M){l.onMouseMove(M);const{clientX:O,clientY:v}=M,{left:k,top:q}=M.currentTarget.getBoundingClientRect();i?(n(4,f=xe(O,s)-k),n(5,u=xe(v,s)-q)):(n(4,f=O-k),n(5,u=v-q))}let w=!1;function P(M){l.onMouseDown(M),a.push(new Ee(f,u)),n(6,a),n(7,w=!0)}function B(M){l.onMouseUp(M),n(7,w=!1)}function G(M){var v;const O=document.activeElement;if(O instanceof HTMLInputElement&&O.dataset.blockShortcuts!=="false"||((v=O==null?void 0:O.dataset)==null?void 0:v.blockShortcuts)==="true"){M.currentTarget===document.activeElement&&l.onKeyPress(M);return}l.onKeyPress(M);for(const k of h)k.try(M)}function z(){r=this.clientWidth,o=this.clientHeight,n(2,r),n(1,o)}function T(M){i=M,n(3,i)}function R(){c=this.value,n(0,c)}return t.$$.update=()=>{t.$$.dirty&1&&(s=c/4)},[c,o,r,i,f,u,a,w,l,$,P,B,G,z,T,R]}class kn extends x{constructor(e){super(),Y(this,e,wn,vn,U,{})}}new kn({target:document.body});
